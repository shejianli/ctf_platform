import{_ as ae,d as v,k as I,l as ie,D as ne,r as S,o as a,g as d,h as e,t as s,a as n,w as u,F as M,m as x,b as p,c as $,n as ce,j as y,E as de,G as re,H as U,p as B,J as ue,K as ve,v as N,x as _e,i as pe}from"./index-26cb0da1.js";const fe={class:"challenge-container"},me={class:"challenge-header"},ge={class:"header-stats"},he={class:"stat-item"},ye={class:"stat-value"},ke={class:"stat-item"},be={class:"stat-value"},Le={class:"stat-item"},we={class:"stat-value"},Ce={class:"challenge-content"},Se={class:"category-filter"},Me={class:"filter-header"},xe={class:"filter-options"},$e={class:"levels-grid"},qe=["onClick"],Te={class:"level-header"},Ae={class:"level-number"},ze={class:"level-status"},Ie={class:"level-content"},Ne={class:"level-title"},Pe={class:"level-description"},Ve={class:"level-meta"},De={class:"level-difficulty"},He={class:"level-points"},We={class:"level-tags"},Fe={class:"level-footer"},Ke={key:0,class:"level-progress"},Ue={key:1,class:"level-requirements"},Be={key:2,class:"level-action"},je={class:"info-panel"},Qe={class:"progress-card"},Xe={class:"progress-bar"},Re={class:"progress-text"},Ee={class:"achievements-card"},Je={class:"achievements-list"},Ge={class:"achievement-icon"},Oe={class:"achievement-info"},Ye={class:"achievement-name"},Ze={class:"achievement-time"},el={class:"leaderboard-card"},ll={class:"leaderboard-list"},tl={class:"rank"},sl={class:"player-info"},ol={class:"player-name"},al={class:"player-score"},il={key:0,class:"level-detail"},nl={class:"detail-header"},cl={class:"level-info"},dl={class:"level-points"},rl={class:"detail-content"},ul={class:"content-section"},vl={class:"content-section"},_l={class:"detail-actions"},pl={key:0,class:"challenge-interface"},fl={class:"challenge-header"},ml={class:"challenge-info"},gl={class:"challenge-timer"},hl={class:"time"},yl={class:"challenge-content"},kl={class:"challenge-description"},bl={class:"task-content"},Ll={class:"challenge-submission"},wl={class:"submission-form"},Cl={class:"challenge-footer"},Sl={__name:"index",setup(Ml){const f=v({completedLevels:5,totalScore:1250,currentLevel:6}),k=v([{id:1,title:"Web入门",description:"学习基础的Web安全知识，包括HTTP协议、HTML基础等",difficulty:"简单",points:100,tags:["Web","基础","HTTP","HTML"],category:"web",completed:!0,locked:!1,completedAt:"2024-01-10 14:30:00",requiredLevel:null},{id:2,title:"SQL注入基础",description:"学习SQL注入的基本原理和利用方法",difficulty:"简单",points:150,tags:["SQL","注入","数据库","基础"],category:"sql",completed:!0,locked:!1,completedAt:"2024-01-12 16:45:00",requiredLevel:null},{id:3,title:"XSS跨站脚本",description:"学习XSS攻击的原理和防御方法",difficulty:"中等",points:200,tags:["XSS","跨站","JavaScript","HTML"],category:"xss",completed:!0,locked:!1,completedAt:"2024-01-15 19:20:00",requiredLevel:null},{id:4,title:"密码学基础",description:"学习密码学的基本概念和算法",difficulty:"中等",points:250,tags:["密码学","加密","解密","Hash","基础"],category:"crypto",completed:!0,locked:!1,completedAt:"2024-01-18 21:15:00",requiredLevel:null},{id:5,title:"逆向工程入门",description:"学习基本的逆向分析技术",difficulty:"中等",points:200,tags:["逆向","反编译","汇编","分析"],category:"reverse",completed:!0,locked:!1,completedAt:"2024-01-20 15:30:00",requiredLevel:null},{id:6,title:"PWN基础",description:"学习缓冲区溢出漏洞利用",difficulty:"困难",points:300,tags:["PWN","溢出","缓冲区","栈","汇编"],category:"pwn",completed:!1,locked:!1,requiredLevel:1},{id:7,title:"隐写术挑战",description:"从各种文件中提取隐藏信息",difficulty:"困难",points:350,tags:["隐写","隐写术","图片","音频","文件分析"],category:"stego",completed:!1,locked:!0,requiredLevel:2},{id:8,title:"取证分析",description:"学习数字取证的基本技术",difficulty:"专家",points:500,tags:["取证","分析","日志","网络","内存"],category:"forensics",completed:!1,locked:!0,requiredLevel:4}]),j=v([{value:"all",label:"全部",icon:"🌟"},{value:"web",label:"Web安全",icon:"🌐"},{value:"sql",label:"SQL注入",icon:"💉"},{value:"xss",label:"XSS攻击",icon:"🕷️"},{value:"crypto",label:"密码学",icon:"🔐"},{value:"reverse",label:"逆向工程",icon:"🔄"},{value:"pwn",label:"PWN漏洞",icon:"💥"},{value:"stego",label:"隐写术",icon:"📁"},{value:"forensics",label:"取证分析",icon:"🔍"},{value:"misc",label:"杂项",icon:"🎲"}]),_=v([]),Q=I(()=>_.value.length===0||_.value.includes("all")?k.value:k.value.filter(o=>_.value.some(l=>{const i=o.tags.map(g=>g.toLowerCase());return X(l).some(g=>i.some(C=>C.includes(g)))}))),X=o=>({web:["web","http","html","javascript","php","python"],sql:["sql","注入","数据库","mysql","postgresql"],xss:["xss","跨站","脚本","javascript","html"],crypto:["密码","加密","解密","hash","md5","sha"],reverse:["逆向","反编译","汇编","ida","gdb"],pwn:["pwn","溢出","缓冲区","栈","堆"],stego:["隐写","隐写术","图片","音频","文件"],forensics:["取证","分析","日志","网络","内存"],misc:["杂项","其他","综合","混合"]})[o]||[],R=o=>{const l=_.value.indexOf(o);o==="all"?l>-1?_.value.splice(l,1):_.value=["all"]:l>-1?_.value.splice(l,1):(_.value=_.value.filter(i=>i!=="all"),_.value.push(o))},E=()=>{_.value=[]},T=v(!1),b=v(!1),r=v(null),c=v(null),L=v(""),A=v(!1),z=v(0);let w=null;const P=I(()=>k.value.length),J=I(()=>Math.round(f.value.completedLevels/P.value*100)),G=v([{id:1,name:"初出茅庐",icon:"🎯",unlockedAt:"2024-01-10 14:30:00"},{id:2,name:"密码专家",icon:"🔐",unlockedAt:"2024-01-12 16:45:00"},{id:3,name:"逆向大师",icon:"🔄",unlockedAt:"2024-01-15 19:20:00"}]),O=v([{id:1,username:"CyberMaster",score:2850},{id:2,username:"SecurityPro",score:2720},{id:3,username:"HackMaster",score:2650},{id:4,username:"CodeBreaker",score:2580},{id:5,username:"NetNinja",score:2450}]),V=o=>({简单:"green",中等:"orange",困难:"red",专家:"purple"})[o]||"gray",D=o=>{const l=new Date(o),m=new Date-l,g=Math.floor(m/(1e3*60)),C=Math.floor(m/(1e3*60*60)),q=Math.floor(m/(1e3*60*60*24));return g<60?`${g}分钟前`:C<24?`${C}小时前`:q<7?`${q}天前`:`${l.getMonth()+1}月${l.getDate()}日`},Y=o=>{const l=Math.floor(o/3600),i=Math.floor(o%3600/60),m=o%60;return`${l.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`},Z=o=>{r.value=o,T.value=!0},H=()=>{T.value=!1,r.value=null},W=o=>{c.value=o;const l={简单:1800,中等:3600,困难:5400,专家:7200};z.value=l[o.difficulty]||3600,ee(),b.value=!0,H()},ee=()=>{w=setInterval(()=>{z.value>0?z.value--:le()},1e3)},le=()=>{clearInterval(w),A.value=!1,b.value=!1,c.value=null,alert("时间到！挑战失败，请重新尝试。")},F=async()=>{if(!L.value.trim()){alert("请输入flag！");return}A.value=!0;try{await new Promise(l=>setTimeout(l,1e3));const o=`flag{level${c.value.id}_${c.value.id*100+50}}`;if(L.value.trim()===o){clearInterval(w),b.value=!1;const l=k.value.find(i=>i.id===c.value.id);l&&(l.completed=!0,l.completedAt=new Date().toLocaleString()),f.value.completedLevels++,f.value.totalScore+=c.value.points,f.value.currentLevel=Math.max(f.value.currentLevel,c.value.id+1),te(c.value.id),alert(`恭喜！挑战成功！获得 ${c.value.points} 积分`)}else alert("Flag错误，请重新尝试！")}catch{alert("提交失败，请重试！")}finally{A.value=!1,L.value=""}},te=o=>{const l=k.value.find(i=>i.id===o+1);l&&l.requiredLevel===o&&(l.locked=!1)},se=()=>{confirm("确定要放弃当前挑战吗？")&&(clearInterval(w),b.value=!1,c.value=null,L.value="")};return ie(()=>{}),ne(()=>{w&&clearInterval(w)}),(o,l)=>{var K;const i=S("a-button"),m=S("a-tag"),g=S("a-col"),C=S("a-row"),q=S("a-modal"),oe=S("a-input");return a(),d("div",fe,[e("div",me,[l[7]||(l[7]=e("div",{class:"header-content"},[e("h1",null,"🎯 闯关模式"),e("p",null,"挑战自我，突破极限！完成关卡获得积分和成就")],-1)),e("div",ge,[e("div",he,[e("div",ye,s(f.value.completedLevels),1),l[4]||(l[4]=e("div",{class:"stat-label"},"已完成关卡",-1))]),e("div",ke,[e("div",be,s(f.value.totalScore),1),l[5]||(l[5]=e("div",{class:"stat-label"},"总积分",-1))]),e("div",Le,[e("div",we,s(f.value.currentLevel),1),l[6]||(l[6]=e("div",{class:"stat-label"},"当前关卡",-1))])])]),e("div",Ce,[e("div",Se,[e("div",Me,[l[9]||(l[9]=e("h3",null,"🔍 分类筛选",-1)),n(i,{type:"text",size:"small",onClick:E},{default:u(()=>l[8]||(l[8]=[p(" 清除筛选 ",-1)])),_:1,__:[8]})]),e("div",xe,[(a(!0),d(M,null,x(j.value,t=>(a(),$(i,{key:t.value,type:_.value.includes(t.value)?"primary":"outline",size:"small",onClick:h=>R(t.value),class:"category-btn"},{default:u(()=>[p(s(t.icon)+" "+s(t.label),1)]),_:2},1032,["type","onClick"]))),128))])]),n(C,{gutter:24},{default:u(()=>[n(g,{span:18},{default:u(()=>[e("div",$e,[(a(!0),d(M,null,x(Q.value,t=>(a(),d("div",{key:t.id,class:ce(["level-card",{completed:t.completed,locked:t.locked,current:t.id===f.value.currentLevel}]),onClick:h=>Z(t)},[e("div",Te,[e("div",Ae,s(t.id),1),e("div",ze,[t.completed?(a(),$(y(de),{key:0,class:"status-icon completed"})):t.locked?(a(),$(y(re),{key:1,class:"status-icon locked"})):(a(),$(y(U),{key:2,class:"status-icon current"}))])]),e("div",Ie,[e("h3",Ne,s(t.title),1),e("p",Pe,s(t.description),1),e("div",Ve,[e("div",De,[n(m,{color:V(t.difficulty),size:"small"},{default:u(()=>[p(s(t.difficulty),1)]),_:2},1032,["color"])]),e("div",He,[n(y(B)),p(" "+s(t.points)+"分 ",1)])]),e("div",We,[(a(!0),d(M,null,x(t.tags,h=>(a(),$(m,{key:h,size:"small",color:"blue"},{default:u(()=>[p(s(h),1)]),_:2},1024))),128))])]),e("div",Fe,[t.completed?(a(),d("div",Ke,[e("span",null,"完成时间: "+s(D(t.completedAt)),1)])):t.locked?(a(),d("div",Ue,[e("span",null,"需要完成关卡 "+s(t.requiredLevel),1)])):(a(),d("div",Be,[n(i,{type:"primary",size:"small",onClick:ue(h=>W(t),["stop"])},{default:u(()=>l[10]||(l[10]=[p(" 开始挑战 ",-1)])),_:2,__:[10]},1032,["onClick"])]))])],10,qe))),128))])]),_:1}),n(g,{span:6},{default:u(()=>[e("div",je,[e("div",Qe,[l[11]||(l[11]=e("h3",null,"📊 闯关进度",-1)),e("div",Xe,[e("div",{class:"progress-fill",style:ve({width:J.value+"%"})},null,4)]),e("div",Re,s(f.value.completedLevels)+" / "+s(P.value)+" 关卡 ",1)]),e("div",Ee,[l[12]||(l[12]=e("h3",null,"🏆 最近成就",-1)),e("div",Je,[(a(!0),d(M,null,x(G.value,t=>(a(),d("div",{key:t.id,class:"achievement-item"},[e("div",Ge,s(t.icon),1),e("div",Oe,[e("div",Ye,s(t.name),1),e("div",Ze,s(D(t.unlockedAt)),1)])]))),128))])]),e("div",el,[l[13]||(l[13]=e("h3",null,"🥇 闯关排行榜",-1)),e("div",ll,[(a(!0),d(M,null,x(O.value,(t,h)=>(a(),d("div",{key:t.id,class:"leaderboard-item"},[e("div",tl,s(h+1),1),e("div",sl,[e("div",ol,s(t.username),1),e("div",al,s(t.score)+"分",1)])]))),128))])])])]),_:1})]),_:1})]),n(q,{visible:T.value,"onUpdate:visible":l[1]||(l[1]=t=>T.value=t),title:r.value?`关卡 ${r.value.id}: ${r.value.title}`:"关卡详情",width:800,footer:!1},{default:u(()=>[r.value?(a(),d("div",il,[e("div",nl,[e("div",cl,[n(m,{color:V(r.value.difficulty),size:"medium"},{default:u(()=>[p(s(r.value.difficulty),1)]),_:1},8,["color"]),e("span",dl,[n(y(B)),p(" "+s(r.value.points)+"分 ",1)])])]),e("div",rl,[e("div",ul,[l[14]||(l[14]=e("h4",null,"📝 关卡描述",-1)),e("p",null,s(r.value.fullDescription||r.value.description),1)]),e("div",vl,[l[15]||(l[15]=e("h4",null,"🎯 学习目标",-1)),e("ul",null,[(a(!0),d(M,null,x(r.value.objectives||["掌握相关技能","完成挑战目标"],t=>(a(),d("li",{key:t},s(t),1))),128))])])]),e("div",_l,[!r.value.completed&&!r.value.locked?(a(),$(i,{key:0,type:"primary",size:"large",onClick:l[0]||(l[0]=t=>W(r.value))},{default:u(()=>[n(y(U)),l[16]||(l[16]=p(" 开始挑战 ",-1))]),_:1,__:[16]})):N("",!0),n(i,{onClick:H},{default:u(()=>l[17]||(l[17]=[p(" 关闭 ",-1)])),_:1,__:[17]})])])):N("",!0)]),_:1},8,["visible","title"]),n(q,{visible:b.value,"onUpdate:visible":l[3]||(l[3]=t=>b.value=t),title:`挑战进行中 - 关卡 ${(K=c.value)==null?void 0:K.id}`,width:900,footer:!1,closable:!1,"mask-closable":!1},{default:u(()=>[c.value?(a(),d("div",pl,[e("div",fl,[e("div",ml,[e("h3",null,s(c.value.title),1),e("p",null,s(c.value.description),1)]),e("div",gl,[n(y(_e)),e("span",hl,s(Y(z.value)),1)])]),e("div",yl,[e("div",kl,[l[19]||(l[19]=e("h4",null,"📋 任务说明",-1)),e("div",bl,[e("p",null,"欢迎来到关卡 "+s(c.value.id)+"！",1),e("p",null,"这是一个"+s(c.value.difficulty)+"难度的挑战，你需要：",1),l[18]||(l[18]=e("ul",null,[e("li",null,"仔细阅读任务说明"),e("li",null,"分析相关附件"),e("li",null,"找到隐藏的flag"),e("li",null,"在时间限制内提交正确答案")],-1))])]),e("div",Ll,[l[21]||(l[21]=e("h4",null,"🚩 提交答案",-1)),e("div",wl,[n(oe,{modelValue:L.value,"onUpdate:modelValue":l[2]||(l[2]=t=>L.value=t),placeholder:"请输入flag格式: flag{...}",size:"large",onKeyup:pe(F,["enter"])},null,8,["modelValue"]),n(i,{type:"primary",size:"large",loading:A.value,onClick:F},{default:u(()=>l[20]||(l[20]=[p(" 提交答案 ",-1)])),_:1,__:[20]},8,["loading"])])])]),e("div",Cl,[n(i,{onClick:se,type:"outline"},{default:u(()=>l[22]||(l[22]=[p(" 放弃挑战 ",-1)])),_:1,__:[22]})])])):N("",!0)]),_:1},8,["visible","title"])])}}},$l=ae(Sl,[["__scopeId","data-v-0cff6c06"]]);export{$l as default};
