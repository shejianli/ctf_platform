import{_ as j,f as q,d as f,e as J,k as G,l as H,r as p,o as r,g,h as t,a as o,w as l,F as K,m as O,j as m,M as P,b as n,E as z,n as Q,c as y,p as X,L as Y,q as Z,t as u,J as F,v as b,B as ee}from"./index-26cb0da1.js";const te={class:"notice-container"},se={class:"notice-header"},ae={class:"header-left"},oe={class:"header-right"},le={class:"notice-content"},ne={class:"notice-filters"},ie={class:"filter-group"},de={class:"filter-group"},re={class:"notice-list"},ue=["onClick"],_e={class:"notice-icon"},me={class:"notice-content"},ce={class:"notice-header-row"},pe={class:"notice-title"},ve={class:"notice-meta"},fe={class:"notice-time"},ge={class:"notice-message"},ye={class:"notice-actions"},ke={class:"notice-status"},Ce={key:0,class:"unread-badge"},we={class:"notice-pagination"},be={key:0,class:"notification-detail"},he={class:"detail-header"},De={class:"detail-time"},xe={class:"detail-content"},ze={class:"detail-message"},Te={class:"detail-info"},Ve={class:"info-item"},Me={class:"info-item"},Ne={class:"info-item"},$e={class:"detail-actions"},Fe={__name:"index",setup(Ie){const I=q(),k=f(""),v=f(""),_=J({current:1,pageSize:10,total:0}),C=f([{id:1,type:"contest",title:"新赛事开始",message:"2024年春季CTF大赛即将开始，请及时报名参加！本次大赛将涵盖Web安全、二进制漏洞、密码学、逆向工程等多个领域，为参赛者提供全面的技术挑战。",timestamp:Date.now()-18e5,read:!1},{id:2,type:"system",title:"系统维护通知",message:"系统将于今晚22:00-24:00进行维护，期间可能影响正常使用。维护内容包括：数据库优化、安全补丁更新、性能提升等。",timestamp:Date.now()-36e5,read:!1},{id:3,type:"user",title:"队伍邀请",message:'你收到了来自"安全卫士"队伍的邀请，请及时处理。该队伍在最近的比赛中表现优异，期待你的加入！',timestamp:Date.now()-72e5,read:!1},{id:4,type:"contest",title:"比赛结果公布",message:"上周的Web安全挑战赛结果已公布，恭喜获奖队伍！本次比赛共有156支队伍参与，竞争激烈。",timestamp:Date.now()-864e5,read:!0},{id:5,type:"system",title:"新功能上线",message:"AWD攻防演练功能已上线，欢迎体验新的攻防对抗模式！该功能支持实时对战、队伍排名、攻击记录等。",timestamp:Date.now()-1728e5,read:!0},{id:6,type:"contest",title:"CTF训练营报名",message:"2024年CTF训练营开始报名，为期一个月，包含理论学习和实战演练。适合初学者和进阶者参加。",timestamp:Date.now()-2592e5,read:!0},{id:7,type:"system",title:"安全公告",message:"发现新的安全漏洞，已发布紧急修复补丁。请所有用户及时更新系统，确保安全。",timestamp:Date.now()-3456e5,read:!0},{id:8,type:"user",title:"积分奖励",message:"恭喜你在最近的练习中获得优异成绩，奖励积分500点！继续努力，提升技能水平。",timestamp:Date.now()-432e6,read:!0}]),w=f(!1),i=f(null),S=G(()=>{let a=C.value;return k.value&&(a=a.filter(e=>e.type===k.value)),v.value&&(v.value==="unread"?a=a.filter(e=>!e.read):v.value==="read"&&(a=a.filter(e=>e.read))),_.total=a.length,a}),T=()=>{_.current=1},B=()=>{I.go(-1)},h=a=>{const e=C.value.find(d=>d.id===a);e&&!e.read&&(e.read=!0)},U=()=>{C.value.forEach(a=>a.read=!0)},A=a=>{i.value=a,w.value=!0},E=()=>{w.value=!1,i.value=null},V=a=>({contest:"blue",system:"orange",user:"green"})[a]||"gray",D=a=>({contest:"赛事通知",system:"系统通知",user:"用户通知"})[a]||"其他",L=a=>{const d=Date.now()-a;return d<6e4?"刚刚":d<36e5?`${Math.floor(d/6e4)}分钟前`:d<864e5?`${Math.floor(d/36e5)}小时前`:`${Math.floor(d/864e5)}天前`},M=a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return H(()=>{_.total=C.value.length}),(a,e)=>{const d=p("a-button"),c=p("a-radio"),N=p("a-radio-group"),x=p("a-tag"),R=p("a-pagination"),W=p("a-modal");return r(),g("div",te,[t("div",se,[t("div",ae,[o(d,{type:"text",onClick:B,class:"back-btn"},{default:l(()=>[o(m(P)),e[6]||(e[6]=n(" 返回 ",-1))]),_:1,__:[6]}),e[7]||(e[7]=t("h1",null,"📢 通知中心",-1))]),t("div",oe,[o(d,{type:"primary",onClick:U},{default:l(()=>[o(m(z)),e[8]||(e[8]=n(" 全部已读 ",-1))]),_:1,__:[8]})])]),t("div",le,[t("div",ne,[t("div",ie,[o(N,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=s=>k.value=s),onChange:T},{default:l(()=>[o(c,{value:""},{default:l(()=>e[9]||(e[9]=[n("全部",-1)])),_:1,__:[9]}),o(c,{value:"contest"},{default:l(()=>e[10]||(e[10]=[n("赛事通知",-1)])),_:1,__:[10]}),o(c,{value:"system"},{default:l(()=>e[11]||(e[11]=[n("系统通知",-1)])),_:1,__:[11]}),o(c,{value:"user"},{default:l(()=>e[12]||(e[12]=[n("用户通知",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),t("div",de,[o(N,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),onChange:T},{default:l(()=>[o(c,{value:""},{default:l(()=>e[13]||(e[13]=[n("全部状态",-1)])),_:1,__:[13]}),o(c,{value:"unread"},{default:l(()=>e[14]||(e[14]=[n("未读",-1)])),_:1,__:[14]}),o(c,{value:"read"},{default:l(()=>e[15]||(e[15]=[n("已读",-1)])),_:1,__:[15]})]),_:1},8,["modelValue"])])]),t("div",re,[(r(!0),g(K,null,O(S.value,s=>(r(),g("div",{key:s.id,class:Q(["notice-item",{unread:!s.read}]),onClick:$=>h(s.id)},[t("div",_e,[s.type==="contest"?(r(),y(m(X),{key:0})):s.type==="system"?(r(),y(m(Y),{key:1})):(r(),y(m(Z),{key:2}))]),t("div",me,[t("div",ce,[t("div",pe,u(s.title),1),t("div",ve,[o(x,{color:V(s.type),size:"small"},{default:l(()=>[n(u(D(s.type)),1)]),_:2},1032,["color"]),t("span",fe,u(L(s.timestamp)),1)])]),t("div",ge,u(s.message),1),t("div",ye,[s.read?b("",!0):(r(),y(d,{key:0,type:"text",size:"small",onClick:F($=>h(s.id),["stop"])},{default:l(()=>[o(m(z)),e[16]||(e[16]=n(" 标记已读 ",-1))]),_:2,__:[16]},1032,["onClick"])),o(d,{type:"text",size:"small",onClick:F($=>A(s),["stop"])},{default:l(()=>[o(m(ee)),e[17]||(e[17]=n(" 查看详情 ",-1))]),_:2,__:[17]},1032,["onClick"])])]),t("div",ke,[s.read?b("",!0):(r(),g("div",Ce))])],10,ue))),128))]),t("div",we,[o(R,{current:_.current,"onUpdate:current":e[2]||(e[2]=s=>_.current=s),"page-size":_.pageSize,"onUpdate:pageSize":e[3]||(e[3]=s=>_.pageSize=s),total:_.total,"show-size-changer":"","show-jumper":"","show-total":""},null,8,["current","page-size","total"])])]),o(W,{visible:w.value,"onUpdate:visible":e[5]||(e[5]=s=>w.value=s),title:i.value?i.value.title:"通知详情",width:600,footer:!1},{default:l(()=>[i.value?(r(),g("div",be,[t("div",he,[o(x,{color:V(i.value.type),size:"medium"},{default:l(()=>[n(u(D(i.value.type)),1)]),_:1},8,["color"]),t("span",De,u(M(i.value.timestamp)),1)]),t("div",xe,[t("p",ze,u(i.value.message),1),t("div",Te,[t("div",Ve,[e[18]||(e[18]=t("span",{class:"label"},"通知类型：",-1)),t("span",null,u(D(i.value.type)),1)]),t("div",Me,[e[19]||(e[19]=t("span",{class:"label"},"发送时间：",-1)),t("span",null,u(M(i.value.timestamp)),1)]),t("div",Ne,[e[20]||(e[20]=t("span",{class:"label"},"状态：",-1)),o(x,{color:i.value.read?"green":"orange"},{default:l(()=>[n(u(i.value.read?"已读":"未读"),1)]),_:1},8,["color"])])])]),t("div",$e,[i.value.read?b("",!0):(r(),y(d,{key:0,type:"primary",onClick:e[4]||(e[4]=s=>h(i.value.id))},{default:l(()=>[o(m(z)),e[21]||(e[21]=n(" 标记已读 ",-1))]),_:1,__:[21]})),o(d,{onClick:E},{default:l(()=>e[22]||(e[22]=[n(" 关闭 ",-1)])),_:1,__:[22]})])])):b("",!0)]),_:1},8,["visible","title"])])}}},Be=j(Fe,[["__scopeId","data-v-6110449c"]]);export{Be as default};
